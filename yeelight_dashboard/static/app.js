webpackJsonp([0],{100:function(t,e,n){"use strict";function i(t,e,n){t.toggleSidenav=function(){e("left").toggle()},t.refresh=function(){n.emit("refresh")}}i.$inject=["$scope","$mdSidenav","commandIO"],Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},101:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){this.toggleSidenav=function(e){t(e).toggle()}};i.$inject=["$mdSidenav"];e.toolbar={template:n(166),controller:i}},102:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=angular.module("filters",[]).filter("torgb",function(){return function(t){var e=parseInt(t,10),n=e>>16,i=e-(n<<16)>>8;return{red:n,green:i,blue:e-(n<<16)-(i<<8)}}}).filter("bulbBackground",function(){return function(t){return"off"===t.power?{"background-color":"grey"}:t.rgb?{"background-color":"#"+(t.rgb>>>0).toString(16).slice(-6)}:{"background-color":"yellow"}}})},103:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=angular.module("services.socketIO",["btford.socket-io"]).factory("discoverIO",["socketFactory","$location",function(t,e){return t({ioSocket:io.connect(e.protocol()+"://"+e.host()+":"+e.port()+"/discover",{transports:["websocket","polling"]})})}]).factory("commandIO",["socketFactory","$location",function(t,e){return t({ioSocket:io.connect(e.protocol()+"://"+e.host()+":"+e.port()+"/command",{transports:["websocket","polling"]})})}])},104:function(t,e,n){"use strict";function i(t,e,n){e.html5Mode(!0).hashPrefix("!"),n.otherwise("/"),t.state({name:"home",url:"/",template:'<app flex layout="column"></app>'}).state({name:"control",url:"/:ip",template:'<control flex layout="column"></control>'})}i.$inject=["$stateProvider","$locationProvider","$urlRouterProvider"],Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},105:function(t,e,n){"use strict";function i(t,e,n){t.bulbs=[],t.loaded=n.defer(),e.on("message",function(e){t.loaded.resolve();var n=_.differenceWith(t.bulbs,e,function(t,e){return t.ip===e.ip});_.pullAll(t.bulbs,n),_.forEach(e,function(e){var n=!1;_.forEach(t.bulbs,function(t){e.ip===t.ip&&(_.merge(t,e),n=!0)}),n||t.bulbs.push(e)})})}i.$inject=["$rootScope","discoverIO","$q"],Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},163:function(t,e){t.exports='\x3c!--{{ $ctrl.data }}--\x3e\n<md-icon aria-label="{{$ctrl.data.ip}}" style="font-size: 48px; height: 48px; width: 48px" ng-if="$ctrl.data.power==\'on\'">lightbulb_outline</md-icon>\n<md-icon aria-label="{{$ctrl.data.ip}}" style="font-size: 48px; height: 48px; width: 48px" ng-if="$ctrl.data.power!=\'on\'">highlight_off</md-icon>\n'},164:function(t,e){t.exports='<md-content layout="column" flex layout-align="start stretch" layout-padding>\n  <h2>{{ $ctrl.bulb.name || $ctrl.bulb.ip }}</h2>\n  <div layout layout-align="center center">\n      <color-picker ng-model="$ctrl.color" ng-if="$ctrl.bulb.rgb" on-select="$ctrl.onSelect(color)"></color-picker>\n  </div>\n  <div layout>\n      <span class="md-body-1">Brightness:</span>\n    </div>\n  <div layout="row">\n    <md-slider class="md-primary" flex min="1" max="100" ng-model="$ctrl.bulb.bright" ng-change="$ctrl.setBrightness()"\n               aria-label="Brightness"></md-slider>\n    <div flex="10" layout layout-align="center center">\n      <span class="md-body-1">{{ $ctrl.bulb.bright }}</span>\n    </div>\n  </div>\n  <div layout="row" layout-align="center center">\n    <md-button ng-click="$ctrl.power()" ng-class="{\'md-warn\': $ctrl.bulb.power==\'on\', \'md-primary\': $ctrl.bulb.power==\'off\'}" class="md-fab">\n      <md-icon>power_settings_new</md-icon>\n    </md-button>\n    <md-button ng-click="$ctrl.white()" class="md-fab md-warn" ng-if="$ctrl.bulb.rgb">\n      <md-icon>wb_sunny</md-icon>\n    </md-button>\n  </div>\n  <div layout ng-if="$ctrl.bulb.ct">\n      <span class="md-body-1">Temperature</span>\n    </div>\n  <div layout="row" ng-if="$ctrl.bulb.ct">\n    <md-slider class="md-warn" flex min="1700" max="6500" ng-model="$ctrl.bulb.ct" ng-change="$ctrl.setTemperature()"\n             aria-label="Temperature"></md-slider>\n    <div flex="10" layout layout-align="center center">\n      <span class="md-body-1">{{ $ctrl.bulb.ct }}</span>\n    </div>\n  </div>\n  <div flex></div>\n  <div layout="row" layout-align="end end">\n      <md-button class="md-primary md-raised" ng-click="$ctrl.rename($event)">Rename</md-button>\n  </div>\n</md-content>\n\n'},165:function(t,e){t.exports='<div layout flex layout-padding>\n  <md-grid-list md-cols="1" md-cols-sm="2" md-cols-md="3" md-cols-gt-md="6"\n          md-row-height-gt-md="1:1" md-row-height="4:3"\n          md-gutter-gt-md="16px" md-gutter-md="8px" md-gutter="4px" flex>\n    <md-grid-tile ng-repeat="bulb in $ctrl.bulbs" ng-style="bulb | bulbBackground" md-rowspan="1"\n                    md-colspan="1" ng-click="$ctrl.control(bulb.ip)">\n      <bulb data="bulb"></bulb>\n      <md-grid-tile-footer>\n        <h3>{{ bulb.name || bulb.ip }}</h3>\n      </md-grid-tile-footer>\n    </md-grid-tile>\n  </md-grid-list>\n</div>\n'},166:function(t,e){t.exports='<md-toolbar layout="row">\n      <div class="md-toolbar-tools">\n        <md-button ng-click="$ctrl.toggleSidenav(\'left\')" hide-gt-sm class="md-icon-button">\n          <md-icon aria-label="Menu">menu</md-icon>\n        </md-button>\n        <h1>YeeLight Dashboard</h1>\n      </div>\n</md-toolbar>\n'},168:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.app=void 0;var o=n(6),s=i(o);n(21),n(20),n(31),n(34),n(93),n(32),n(33),n(35);var r=n(99),a=n(101),l=n(97),u=n(98),c=n(100),d=i(c),h=n(104),p=i(h),m=n(105),f=i(m);n(103),n(102),n(96),n(94),n(95);var g=e.app="app";s.default.module(g,["ngMaterial","ui.router","color.picker.core","btford.socket-io","services.socketIO","filters"]).config(p.default).component("app",r.main).component("toolbar",a.toolbar).component("bulb",l.bulb).component("control",u.control).controller("MenuController",d.default).run(f.default)},93:function(t,e){!function(t){var e={angle:0,speed:0,inertia:0,minimalSpeed:.001,minimalAngleChange:.1,step:0,stepTransitionTime:0,stepTransitionEasing:"linear",rotateParentInstantly:!1,touchElement:null},n=function(t,e){if("string"==typeof t&&(t=document.querySelectorAll(t)),t.length>1)return n.createMany(t,e);1===t.length&&(t=t[0]),this.element=t,this.active=!1,this.transiting=!1,this.update=this.update.bind(this),this.initCSSPrefix(),this.initAngleGetterSetter(),this.initOptions(e),this.initHardwareAcceleration(),this.initTransition(),this.bindHandlers(),this.addListeners(),this.update()};n.createMany=function(t,e){for(var i=[],o=0;o<t.length;o++)i.push(new n(t[o],e));return i};var i=n.prototype;i.initAngleGetterSetter=function(){Object.defineProperty(this,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this.virtualAngle=t,this.updateCSS()}})},i.bindHandlers=function(){this.onRotationStart=this.onRotationStart.bind(this),this.onRotationStop=this.onRotationStop.bind(this),this.onRotated=this.onRotated.bind(this)},i.addListeners=function(){this.listenersInstalled=!0,"ontouchstart"in document.documentElement?(this.touchElement.addEventListener("touchstart",this.onRotationStart),this.touchElement.addEventListener("touchmove",this.onRotated),this.touchElement.addEventListener("touchend",this.onRotationStop),this.touchElement.addEventListener("touchcancel",this.onRotationStop),this.touchElement.addEventListener("dragstart",this.returnFalse)):(this.touchElement.addEventListener("mousedown",this.onRotationStart),this.touchElement.addEventListener("mousemove",this.onRotated),this.touchElement.addEventListener("mouseup",this.onRotationStop),this.touchElement.addEventListener("mouseleave",this.onRotationStop),this.touchElement.addEventListener("dragstart",this.returnFalse)),this.touchElement.ondragstart=this.returnFalse},i.removeListeners=function(){this.listenersInstalled=!1,"ontouchstart"in document.documentElement?(this.touchElement.removeEventListener("touchstart",this.onRotationStart),this.touchElement.removeEventListener("touchmove",this.onRotated),this.touchElement.removeEventListener("touchend",this.onRotationStop),this.touchElement.removeEventListener("touchcancel",this.onRotationStop),this.touchElement.removeEventListener("dragstart",this.returnFalse)):(this.touchElement.removeEventListener("mousedown",this.onRotationStart),this.touchElement.removeEventListener("mousemove",this.onRotated),this.touchElement.removeEventListener("mouseup",this.onRotationStop),this.touchElement.removeEventListener("mouseleave",this.onRotationStop),this.touchElement.removeEventListener("dragstart",this.returnFalse))},i.bind=function(){!0!==this.listenersInstalled&&this.addListeners()},i.unbind=function(){!0===this.listenersInstalled&&(this.removeListeners(),this.onRotationStop())},i.stop=function(){this.speed=0,this.onRotationStop()},i.onRotationStart=function(t){this.initCoordinates(),this.initDrag(),this.active=!0,void 0!==this.onDragStart&&this.onDragStart(),!1===this.rotateParentInstantly&&t.stopPropagation()},i.onRotationStop=function(){void 0!==this.onDragStop&&!0===this.active&&this.onDragStop(),this.active=!1},i.onRotated=function(t){!0===this.active&&(t.stopPropagation(),t.preventDefault(),void 0!==t.targetTouches&&void 0!==t.targetTouches[0]?this.lastMouseEvent={pageX:t.targetTouches[0].pageX,pageY:t.targetTouches[0].pageY}:this.lastMouseEvent={pageX:t.pageX||t.clientX,pageY:t.pageY||t.clientY})},i.update=function(){void 0!==this.lastMouseEvent&&!0===this.active&&this.updateAngleToMouse(this.lastMouseEvent),this.updateAngle(),this.applySpeed(),this.applyInertia(),Math.abs(this.lastAppliedAngle-this._angle)>=this.minimalAngleChange&&!1===this.transiting&&(this.updateCSS(),this.blockTransition(),void 0!==this.onRotate&&"function"==typeof this.onRotate&&this.onRotate.bind(this)(),this.lastAppliedAngle=this._angle),window.requestAnimFrame(this.update)},i.updateAngle=function(){this.step>0?this._angle=this.getAngleFromVirtual():this._angle=this.normalizeAngle(this.virtualAngle)},i.getAngleFromVirtual=function(){return Math.ceil(this.virtualAngle/this.step)*this.step},i.normalizeAngle=function(t){var e=t;return e%=360,e<0&&(e=360+e),e},i.differenceBetweenAngles=function(t,e){var n=t*(Math.PI/180),i=e*(Math.PI/180),o=Math.atan2(Math.sin(n-i),Math.cos(n-i)),s=o*(180/Math.PI);return Math.round(100*s)/100},i.applySpeed=function(){this.inertia>0&&0!==this.speed&&!1===this.active&&(this.virtualAngle+=this.speed)},i.applyInertia=function(){this.inertia>0&&(Math.abs(this.speed)>=this.minimalSpeed?(this.speed=this.speed*this.inertia,!1===this.active&&Math.abs(this.speed)<this.minimalSpeed&&void 0!==this.onStop&&this.onStop()):0!==this.speed&&(this.speed=0))},i.updateAngleToMouse=function(t){var n=t.pageX-this.cx,i=t.pageY-this.cy,o=Math.atan2(n,i),s=o*(180/Math.PI*-1)+180;if(void 0===this.lastMouseAngle&&(this.lastElementAngle=this.virtualAngle,this.lastMouseAngle=s),this.stepTransitionTime!==e.stepTransitionTime)this.speed=this.mouseDiff=this.differenceBetweenAngles(s,this.lastMouseAngle),this.virtualAngle=this.lastElementAngle+this.mouseDiff,this.lastElementAngle=this.virtualAngle,this.lastMouseAngle=s;else{var r=this.virtualAngle;this.mouseDiff=s-this.lastMouseAngle,this.virtualAngle=this.lastElementAngle+this.mouseDiff;var a=this.virtualAngle;this.speed=this.differenceBetweenAngles(a,r)}},i.initCoordinates=function(){var t=this.getViewOffset();this.cx=t.x+this.element.offsetWidth/2,this.cy=t.y+this.element.offsetHeight/2},i.initDrag=function(){this.speed=0,this.lastMouseAngle=void 0,this.lastElementAngle=void 0,this.lastMouseEvent=void 0},i.initOptions=function(t){t=t||e,this.touchElement=document.querySelectorAll(t.touchElement)[0]||this.element,this.onRotate=t.onRotate||t.onrotate,this.onStop=t.onStop||t.onstop,this.onDragStop=t.onDragStop||t.ondragstop,this.onDragStart=t.onDragStart||t.ondragstart,this.step=t.step||e.step,this.stepTransitionTime=t.stepTransitionTime||e.stepTransitionTime,this.stepTransitionEasing=t.stepTransitionEasing||e.stepTransitionEasing,this.angle=t.angle||e.angle,this.speed=t.speed||e.speed,this.inertia=t.inertia||e.inertia,this.minimalSpeed=t.minimalSpeed||e.minimalSpeed,this.lastAppliedAngle=this.virtualAngle=this._angle=t.angle||e.angle,this.minimalAngleChange=this.step!==e.step?this.step:e.minimalAngleChange,this.rotateParentInstantly=t.rotateParentInstantly||e.rotateParentInstantly},i.initCSSPrefix=function(){void 0===n.cssPrefix&&(void 0!==document.body.style.transform?n.cssPrefix="":void 0!==document.body.style.mozTransform?n.cssPrefix="-moz-":void 0!==document.body.style.webkitTransform?n.cssPrefix="-webkit-":void 0!==document.body.style.msTransform&&(n.cssPrefix="-ms-"))},i.initHardwareAcceleration=function(){this.accelerationPostfix="";var t,e=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var o in i)void 0!==e.style[o]&&(e.style[o]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(i[o]));document.body.removeChild(e),!0==(void 0!==t&&t.length>0&&"none"!==t)&&(this.accelerationPostfix="translateZ(0)",this.element.style[n.cssPrefix+"transform"]=this.accelerationPostfix,this.updateCSS())},i.initTransition=function(){if(this.stepTransitionTime!==e.stepTransitionTime){var t="all "+this.stepTransitionTime+"ms "+this.stepTransitionEasing;this.element.style[n.cssPrefix+"transition"]=t}},i.updateCSS=function(){this.element.style[n.cssPrefix+"transform"]="rotate("+this._angle+"deg) "+this.accelerationPostfix},i.blockTransition=function(){if(this.stepTransitionTime!==e.stepTransitionTime){var t=this;setTimeout(function(){t.transiting=!1},this.stepTransitionTime),this.transiting=!0}},i.getViewOffset=function(t){var e={x:0,y:0};return this.element&&this.addOffset(this.element,e,"defaultView"in document?document.defaultView:document.parentWindow),e},i.addOffset=function(t,e,n){var i=t.offsetParent;if(e.x+=t.offsetLeft-(i?i.scrollLeft:0),e.y+=t.offsetTop-(i?i.scrollTop:0),i){if(1==i.nodeType){var o=n.getComputedStyle(i,"");if("static"!=o.position){if(e.x+=parseInt(o.borderLeftWidth),e.y+=parseInt(o.borderTopWidth),"table"==i.localName.toLowerCase())e.x+=parseInt(o.paddingLeft),e.y+=parseInt(o.paddingTop);else if("body"==i.localName.toLowerCase()){var s=n.getComputedStyle(t,"");e.x+=parseInt(s.marginLeft),e.y+=parseInt(s.marginTop)}}else"body"==i.localName.toLowerCase()&&(e.x+=parseInt(o.borderLeftWidth),e.y+=parseInt(o.borderTopWidth));for(var r=t.parentNode;i!=r;)e.x-=r.scrollLeft,e.y-=r.scrollTop,r=r.parentNode;this.addOffset(i,e,n)}}else{if("body"==t.localName.toLowerCase()){var s=n.getComputedStyle(t,"");e.x+=parseInt(s.borderLeftWidth),e.y+=parseInt(s.borderTopWidth);var a=n.getComputedStyle(t.parentNode,"");e.x+=parseInt(a.paddingLeft),e.y+=parseInt(a.paddingTop),e.x+=parseInt(a.marginLeft),e.y+=parseInt(a.marginTop)}t.scrollLeft&&(e.x+=t.scrollLeft),t.scrollTop&&(e.y+=t.scrollTop);var l=t.ownerDocument.defaultView;l&&l.frameElement&&this.addOffset(l.frameElement,e,l)}},i.returnFalse=function(){return!1},void 0!==t.$&&($.propeller={},$.propeller.propellers=[],$.fn.propeller=function(t){return this.each(function(){if(!$.data(this,"plugin_propeller")){var e=new n(this,t);$.data(this,"plugin_propeller",e),$.propeller.propellers.push(e)}})}),n.deg2radians=2*Math.PI/360,t.Propeller=n}(window),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}()},94:function(t,e){},95:function(t,e){},96:function(t,e){},97:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){};e.bulb={template:n(163),controller:i,bindings:{data:"="}}},98:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n,i,o){var s=this;e.loaded.promise.then(function(){s.bulb=_.find(e.bulbs,["ip",t.ip]),s.color=n(s.bulb.rgb)}),this.onSelect=function(t){var e={ip:s.bulb.ip,red:t.rgba.red,green:t.rgba.green,blue:t.rgba.blue};i.emit("rgb",e)},this.setBrightness=function(){var t={ip:s.bulb.ip,value:s.bulb.bright};i.emit("brightness",t)},this.power=function(){i.emit("toggle",{ip:s.bulb.ip})},this.setTemperature=function(){var t={ip:s.bulb.ip,value:s.bulb.ct};i.emit("temperature",t)},this.white=function(){var t={ip:s.bulb.ip,red:255,green:255,blue:255};i.emit("rgb",t)},this.rename=function(t){var e=o.prompt().title("Bulb rename").placeholder("Bulb name").ariaLabel("Bulb name").targetEvent(t).ok("Submit").cancel("Fuck off");o.show(e).then(function(t){var e={ip:s.bulb.ip,value:t};i.emit("set_name",e)}).catch(function(){})}};i.$inject=["$stateParams","$rootScope","torgbFilter","commandIO","$mdDialog"];e.control={template:n(164),controller:i}},99:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){this.bulbs=t.bulbs,this.control=function(t){e.go("control",{ip:t})}};i.$inject=["$rootScope","$state"];e.main={template:n(165),controller:i}}},[168]);